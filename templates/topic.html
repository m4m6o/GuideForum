{% extends 'base.html' %}
{% block content %}
    <p>Topic: {{ topic }}</p>
    <img src="{{ topic.preview.url }}">
    <p>Owner: {{ topic.owner }}</p>
    <p>Date_added: {{ topic.date_added }}</p>
    <p>Tags:</p>
    <ul>
        {% for tag in topic.tags.all %}
            <li>
                <p>{{ tag.name }}</p>
            </li>
        {% endfor %}
    </ul>
    <p>{{ topic.text }}</p>
    <p>{{ topic.rating }}</p>
    <form action="{% url 'like_topic' topic.id %}" method="POST">
        {% csrf_token %}
        {% if request.user in topic.likes.all %}
            <button type="submit" class="btn btn-primary">Liked</button>
        {% else %}
            <button type="submit" class="btn btn-primary">Like</button>
        {% endif %}
    </form>

    <p>Entries:</p>
    <p>
        <a href="{% url 'new_entry' topic.id %}">Add new entry</a>
    </p>
    <ul>
        {% for entry in entries %}
            <li>
                <p>{{ entry.date_added|date:'M d, Y H:i' }}</p>
                <p>{{ entry.text|linebreaks }}</p>
                <p>
                    <a href="{% url 'edit_entry' entry.id %}">edit entry</a>
                </p>
            </li>
        {% empty %}
            <li>
                There are no entries for this topic yet
            </li>
        {% endfor %}
    </ul>
{% endblock content %}